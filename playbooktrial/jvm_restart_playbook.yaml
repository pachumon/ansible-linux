---
- name: Verify JVM logs and restart service
  hosts: "{{ host }}"
  gather_facts: True

  tasks:
    - name: check if specific file exist 
      become: true
      find:
        paths: "{{ path }}"
        patterns: '*logs.log'
        recurse: no           
      register: found_files   

    - debug:       
        var: found_files

    - name: check if the file contains specific error
      lineinfile:
        dest: /home/adminuser/sampledir/serverlogs.log
        line: "error"
      check_mode: yes
      register: file_presence

    - debug:       
        var: file_presence